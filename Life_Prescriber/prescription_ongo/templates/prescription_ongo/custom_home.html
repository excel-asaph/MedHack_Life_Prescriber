<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <title>Health Practitioner Page</title>
    <meta charset="utf-8">
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="{% static './images/loading1.png' %}">
    <link rel="stylesheet" href="{% static './styles/custom_home.css' %}">
    <script src="https://kit.fontawesome.com/95cc5340fb.js" crossorigin="anonymous"></script>
</head>

<body>
    {% include 'prescription_ongo/messages.html' %}
    <main>
        <div class="personal-info">
            <div id="wel-icon">
                <div id="icon">
                    <i class="fa-solid fa-user"></i>
                </div>
                <div id="welcome-msg">
                    <h1>Hi, welcome back!</h1>
                    <p><span id="names">{{custom_logged_user.first_name}} {{custom_logged_user.last_name}}</span>
                    </p>
                    <p><span id="designation">{{ custom_logged_user.designation }}</span></p>
                </div>
            </div>
            <div id="active">
                {% if custom_logged_user.is_authenticated %}
                <button>Active</button>
                {% endif %}
                <div id="inner-nav">
                    <a href="{% url 'prescription:custom_logout' %}"><i class="fa-solid fa-right-from-bracket"></i></a>
                </div>
            </div>
        </div>

        <div class="bio">
            <div id="employer">
                <div id="hospital-icon">
                    <i class="fa-solid fa-hospital"></i>
                </div>
                <div id="hospital-text">
                    <p><span id="parent">Parent Organization</span><br><span
                            id="parent1">{{custom_logged_user.medical_institution}}</span></p>
                </div>
            </div>
            <div id="uid">
                <div id="user-icon">
                    <i class="fa-solid fa-user-doctor"></i>
                </div>
                <div id="user-text">
                    <p><span id="moniker">Username</span><br> <span id="moniker1">{{custom_logged_user.username}}</span></p>
                </div>
            </div>
        </div>
        <div class="forms-div">
            <div>
                {% if success_msg %}
                <p aria-live="assertive" class="msg">{{success_msg}}</p>
                {% endif %}
                {% if error_msg %}
                <p aria-live="assertive" class="msg">{{error_msg}}</p>
                {% endif %}
            </div>
            <form action="{% url 'prescription:secret_search_patient' %}" method="post">
                {% csrf_token %}
                <p>
                    {{insurance_form.insurance_name.label_tag}}
                    {{insurance_form.insurance_name}}
                </p>
                <p>
                    <label for="insurance_number">
                        Insurance Number
                    </label>
                    <input type="text" name="insurance_number" id="insurance_number" value="{{err_insurance_number}}"
                        required>
                </p>
                <button type="submit" class="search_user">
                    Search User
                </button>
            </form>
            <div>
                {% if success_msg %}
                <h1>Patient</h1>
                <table>
                    <thead>
                        <tr>
                            <th>Username</th>
                            <th>First Name</th>
                            <th>Middle Name</th>
                            <th>Last Name</th>
                            <th>Email</th>
                            <th>Insurance ID</th>
                            <th>All Prescription</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{{ patient.username }}</td>
                            <td>{{ patient.first_name }}</td>
                            <td>{{ patient.middle_name }}</td>
                            <td>{{ patient.last_name }}</td>
                            <td>{{ patient.email }}</td>
                            <td>{{ patient.insurance_id }}</td>
                            <td><a href="{% url 'prescription:user_prescription' patient.id %}">go to prescription</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                {% endif %}
            </div>
        </div>
    </main>
    <script>
        const searchButton = document.querySelector(".search_user");
        searchButton.addEventListener("mouseenter", () => {
            const successElement = document.querySelector(".msg");
            if (successElement) {
                successElement.textContent = "";
            }
        });
    </script>
</body>

</html>